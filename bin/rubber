#!/usr/bin/env ruby
env = ENV['RUBBER_ENV'] ||= 'development'
root = '.'

# Only load gemfile if there and contains rubber in order
# to allow vulcanize to work in bootstrap case
if File.exists?("Gemfile") && File.read("Gemfile").lines.grep(/gem.*["']rubber["']/).size > 0
  require "bundler"
  Bundler.setup(:default, env.to_sym)
end

require 'rubber'
require 'rubber/cli'

Rubber::initialize(root, env)
Rubber::CLI.start
